## Техническое задание: Сервис рекомендаций фильмов (Микросервисная архитектура с FastAPI)

### 1. Общая информация

Название проекта: Сервис рекомендаций фильмов

Цель проекта: Разработка микросервисной архитектуры для сервиса рекомендаций фильмов, предоставляющего пользователям персональные рекомендации на основе их предпочтений.

Язык программирования: Python

Фреймворк: FastAPI (для каждого микросервиса)

База данных: PostgreSQL

Кэш: Redis

Асинхронные задачи: Celery

Брокер сообщений: RabbitMQ/Kafka

Система оркестрации: Kubernetes/Docker Swarm

### 2. Микросервисы

2.1. Сервис аутентификации (Auth Service)

• Отвечает за регистрацию и аутентификацию пользователей.
• Выдает JWT-токены для авторизации.
• Хранит информацию о пользователях (email, пароль, имя, фамилия).

2.2. Сервис фильмов (Movie Service)

• Хранит информацию о фильмах (название, описание, жанры, год выпуска, актеры, режиссеры, рейтинг).
• Предоставляет API для получения информации о фильмах.

2.3. Сервис рекомендаций (Recommendation Service)

• Реализует алгоритмы рекомендаций:
* Рекомендации на основе истории просмотров.
* Рекомендации на основе оценок.
* Рекомендации на основе популярности.
  • Предоставляет API для получения рекомендаций фильмов.
  • Использует брокер сообщений для получения информации о просмотренных фильмах от сервиса аутентификации.

2.4. Сервис истории просмотров (Watch History Service)

• Хранит историю просмотров фильмов для каждого пользователя.
• Предоставляет API для добавления/удаления фильмов из истории просмотров.
• Отправляет сообщения в брокер сообщений о просмотренных фильмах.

2.5. Сервис оценок (Rating Service)

• Хранит оценки фильмов от пользователей.
• Предоставляет API для добавления/изменения оценок фильмов.
• Отправляет сообщения в брокер сообщений о новых оценках.

### 3. Взаимодействие между микросервисами

• Все микросервисы общаются друг с другом через брокер сообщений.
• Сервисы аутентификации, истории просмотров и оценок отправляют сообщения в брокер сообщений о действиях пользователей.
• Сервис рекомендаций получает сообщения из брокера и обновляет рекомендации.

### 4. Нефункциональные требования

4.1. Производительность:

• Каждый микросервис должен справляться с большой нагрузкой запросов.
• Время отклика на запросы должно быть минимальным.

4.2. Безопасность:

• Хранение паролей пользователей в зашифрованном виде.
• Защита от SQL-инъекций и других уязвимостей.

4.3. Масштабируемость:

• Каждый микросервис должен быть легко масштабируемым для увеличения нагрузки.

4.4. Доступность:

• Каждый микросервис должен быть доступен 24/7.
• Реализация механизмов отказоустойчивости для каждого микросервиса.

4.5. Управление зависимостями:

• Внедрение системы управления зависимостями для координации версий микросервисов.

### 5. Этапы разработки

• Этап 1: Разработка архитектуры системы, включая выбор технологий и определение ролей микросервисов.
• Этап 2: Разработка каждого микросервиса:
* Реализация API для каждого микросервиса с использованием FastAPI.
* Создание моделей базы данных для каждого микросервиса.
* Настройка кэширования Redis для каждого микросервиса.
* Настройка Celery для асинхронной обработки задач в каждом микросервисе.
* Настройка брокера сообщений.
  • Этап 3: Тестирование:
* Тестирование функциональности каждого микросервиса.
* Тестирование взаимодействия между микросервисами.
  • Этап 4: Разработка документации.
  • Этап 5: Деплоймент микросервисов в Kubernetes/Docker Swarm.

### 6. Критерии приемки

• Каждый микросервис успешно развернут и доступен через API.
• API каждого микросервиса функционирует в соответствии с документацией.
• Взаимодействие между микросервисами работает корректно.
• Система рекомендаций работает корректно и предоставляет релевантные результаты.
• Кэширование данных работает эффективно.
• Асинхронная обработка задач работает стабильно.
• Каждый микросервис соответствует требованиям к производительности, безопасности, масштабируемости и доступности.

### 7. Технические детали

• Фреймворк: FastAPI (для каждого микросервиса)
• База данных: PostgreSQL
• ORM: SQLAlchemy (для каждого микросервиса)
• Алгоритмы рекомендаций: Content-based filtering, Collaborative filtering, Popularity-based filtering
• Кэш: Redis
• Асинхронные задачи: Celery
• Брокер сообщений: RabbitMQ/Kafka
• Система оркестрации: Kubernetes/Docker Swarm
• Инструменты тестирования: pytest/unittest
• Система контроля версий: Git
• Сервис для деплоймента: Heroku/AWS/GCP

Важно: Данное техническое задание является примерным и может быть модифицировано в зависимости от конкретных потребностей проекта.
